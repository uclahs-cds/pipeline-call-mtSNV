---
global:
  temp_dir: ./test/work
  nf_config: test/global.config
  remove_temp: true
  clean_logs: true

cases:
  - name: single-normal
    message: Test pipeline in single mode with a normal sample
    nf_script: main.nf
    nf_config: test/input.config
    params_file: test/yaml/illumina/normal.yaml
    skip: true
    verbose: true
    asserts:
      - actual: call-mtSNV-*/NA24149/mitoCaller-*/output/mitoCaller2vcf-*_NFTEST_NA24149_homoplasmy.vcf
        expect: /hot/software/pipeline/pipeline-call-mtSNV/Nextflow/development/outputs/illumina/normal/call-mtSNV-4.0.0/NA24149/mitoCaller-1.0.0/output/mitoCaller2vcf-1.0.0_REFERENCE_NA24149_homoplasmy.vcf
        script: test/assert_vcf.sh
      - actual: call-mtSNV-*/NA24149/mitoCaller-*/output/mitoCaller2vcf-*_NFTEST_NA24149.vcf
        expect: /hot/software/pipeline/pipeline-call-mtSNV/Nextflow/development/outputs/illumina/normal/call-mtSNV-4.0.0/NA24149/mitoCaller-1.0.0/output/mitoCaller2vcf-1.0.0_REFERENCE_NA24149.vcf
        script: test/assert_vcf.sh
      - actual: call-mtSNV-*/NA24149/mitoCaller-*/output/MToolBox-*-b52269e_NFTEST_NA24149.bam
        expect: /hot/software/pipeline/pipeline-call-mtSNV/Nextflow/development/outputs/illumina/normal/call-mtSNV-4.0.0/NA24149/mitoCaller-1.0.0/output/MToolBox-1.2.1-b52269e_REFERENCE_NA24149.bam
        method: md5
      - actual: call-mtSNV-*/NA24149/mitoCaller-*/output/MToolBox-*-b52269e_NFTEST_NA24149_mt-classification-best-results.csv
        expect: /hot/software/pipeline/pipeline-call-mtSNV/Nextflow/development/outputs/illumina/normal/call-mtSNV-4.0.0/NA24149/mitoCaller-1.0.0/output/MToolBox-1.2.1-b52269e_REFERENCE_NA24149_mt-classification-best-results.csv
        script: test/assert_MToolBox_csv.sh
      - actual: call-mtSNV-*/NA24149/mitoCaller-*/output/MToolBox-*-b52269e_NFTEST_NA24149_summary*.txt
        expect: /hot/software/pipeline/pipeline-call-mtSNV/Nextflow/development/outputs/illumina/normal/call-mtSNV-4.0.0/NA24149/mitoCaller-1.0.0/output/MToolBox-1.2.1-b52269e_REFERENCE_NA24149_summary-20240325-204026.txt
        script: test/assert_MToolBox_summary.sh

  - name: single-tumor
    message: Test pipeline in single mode with a tumor sample
    nf_script: main.nf
    nf_config: test/input.config
    params_file: test/yaml/illumina/tumor.yaml
    skip: true
    verbose: true
    asserts:
      - actual: call-mtSNV-*/NA24143/mitoCaller-*/output/mitoCaller2vcf-*_NFTEST_NA24143_homoplasmy.vcf
        expect: /hot/software/pipeline/pipeline-call-mtSNV/Nextflow/development/outputs/illumina/tumor/call-mtSNV-4.0.0/NA24143/mitoCaller-1.0.0/output/mitoCaller2vcf-1.0.0_REFERENCE_NA24143_homoplasmy.vcf
        script: test/assert_vcf.sh
      - actual: call-mtSNV-*/NA24143/mitoCaller-*/output/mitoCaller2vcf-*_NFTEST_NA24143.vcf
        expect: /hot/software/pipeline/pipeline-call-mtSNV/Nextflow/development/outputs/illumina/tumor/call-mtSNV-4.0.0/NA24143/mitoCaller-1.0.0/output/mitoCaller2vcf-1.0.0_REFERENCE_NA24143.vcf
        script: test/assert_vcf.sh
      - actual: call-mtSNV-*/NA24143/mitoCaller-*/output/MToolBox-*-b52269e_NFTEST_NA24143.bam
        expect: /hot/software/pipeline/pipeline-call-mtSNV/Nextflow/development/outputs/illumina/tumor/call-mtSNV-4.0.0/NA24143/mitoCaller-1.0.0/output/MToolBox-1.2.1-b52269e_REFERENCE_NA24143.bam
        method: md5
      - actual: call-mtSNV-*/NA24143/mitoCaller-*/output/MToolBox-*-b52269e_NFTEST_NA24143_mt-classification-best-results.csv
        expect: /hot/software/pipeline/pipeline-call-mtSNV/Nextflow/development/outputs/illumina/tumor/call-mtSNV-4.0.0/NA24143/mitoCaller-1.0.0/output/MToolBox-1.2.1-b52269e_REFERENCE_NA24143_mt-classification-best-results.csv
        script: test/assert_MToolBox_csv.sh
      - actual: call-mtSNV-*/NA24143/mitoCaller-*/output/MToolBox-*-b52269e_NFTEST_NA24143_summary*.txt
        expect: /hot/software/pipeline/pipeline-call-mtSNV/Nextflow/development/outputs/illumina/tumor/call-mtSNV-4.0.0/NA24143/mitoCaller-1.0.0/output/MToolBox-1.2.1-b52269e_REFERENCE_NA24143_summary-20240325-204303.txt
        script: test/assert_MToolBox_summary.sh

  - name: paired
    message: Test pipeline in paired mode.
    nf_script: main.nf
    nf_config: test/input.config
    params_file: test/yaml/illumina/paired.yaml
    skip: true
    verbose: true
    asserts:
      - actual: call-mtSNV-*/NA24143/mitoCaller-*/output/call-heteroplasmy-*_NFTEST_NA24143_filtered.tsv
        expect: /hot/software/pipeline/pipeline-call-mtSNV/Nextflow/development/outputs/illumina/paired/call-mtSNV-4.0.0/NA24143/mitoCaller-1.0.0/output/call-heteroplasmy-1.0.1_REFERENCE_NA24143_filtered.tsv
        method: md5
      - actual: call-mtSNV-*/NA24143/mitoCaller-*/output/mitoCaller2vcf-*_NFTEST_NA24149_homoplasmy.vcf
        expect: /hot/software/pipeline/pipeline-call-mtSNV/Nextflow/development/outputs/illumina/paired/call-mtSNV-4.0.0/NA24143/mitoCaller-1.0.0/output/mitoCaller2vcf-1.0.0_REFERENCE_NA24143_homoplasmy.vcf
        script: test/assert_vcf.sh
      - actual: call-mtSNV-*/NA24143/mitoCaller-*/output/mitoCaller2vcf-*_NFTEST_NA24149.vcf
        expect: /hot/software/pipeline/pipeline-call-mtSNV/Nextflow/development/outputs/illumina/paired/call-mtSNV-4.0.0/NA24143/mitoCaller-1.0.0/output/mitoCaller2vcf-1.0.0_REFERENCE_NA24143.vcf
        script: test/assert_vcf.sh
      - actual: call-mtSNV-*/NA24143/mitoCaller-*/output/mitoCaller2vcf-*_NFTEST_NA24143_homoplasmy.vcf
        expect: /hot/software/pipeline/pipeline-call-mtSNV/Nextflow/development/outputs/illumina/paired/call-mtSNV-4.0.0/NA24143/mitoCaller-1.0.0/output/mitoCaller2vcf-1.0.0_REFERENCE_NA24149_homoplasmy.vcf
        script: test/assert_vcf.sh
      - actual: call-mtSNV-*/NA24143/mitoCaller-*/output/mitoCaller2vcf-*_NFTEST_NA24143.vcf
        expect: /hot/software/pipeline/pipeline-call-mtSNV/Nextflow/development/outputs/illumina/paired/call-mtSNV-4.0.0/NA24143/mitoCaller-1.0.0/output/mitoCaller2vcf-1.0.0_REFERENCE_NA24149.vcf
        script: test/assert_vcf.sh
      - actual: call-mtSNV-*/NA24143/mitoCaller-*/output/MToolBox-*-b52269e_NFTEST_NA24149.bam
        expect: /hot/software/pipeline/pipeline-call-mtSNV/Nextflow/development/outputs/illumina/paired/call-mtSNV-4.0.0/NA24143/mitoCaller-1.0.0/output/MToolBox-1.2.1-b52269e_REFERENCE_NA24143.bam
        method: md5
      - actual: call-mtSNV-*/NA24143/mitoCaller-*/output/MToolBox-*-b52269e_NFTEST_NA24149_mt-classification-best-results.csv
        expect: /hot/software/pipeline/pipeline-call-mtSNV/Nextflow/development/outputs/illumina/paired/call-mtSNV-4.0.0/NA24143/mitoCaller-1.0.0/output/MToolBox-1.2.1-b52269e_REFERENCE_NA24143_mt-classification-best-results.csv
        script: test/assert_MToolBox_csv.sh
      - actual: call-mtSNV-*/NA24143/mitoCaller-*/output/MToolBox-*-b52269e_NFTEST_NA24149_summary*.txt
        expect: /hot/software/pipeline/pipeline-call-mtSNV/Nextflow/development/outputs/illumina/paired/call-mtSNV-4.0.0/NA24143/mitoCaller-1.0.0/output/MToolBox-1.2.1-b52269e_REFERENCE_NA24143_summary-*.txt
        script: test/assert_MToolBox_summary.sh
      - actual: call-mtSNV-*/NA24143/mitoCaller-*/output/MToolBox-*-b52269e_NFTEST_NA24143.bam
        expect: /hot/software/pipeline/pipeline-call-mtSNV/Nextflow/development/outputs/illumina/paired/call-mtSNV-4.0.0/NA24143/mitoCaller-1.0.0/output/MToolBox-1.2.1-b52269e_REFERENCE_NA24149.bam
        method: md5
      - actual: call-mtSNV-*/NA24143/mitoCaller-*/output/MToolBox-*-b52269e_NFTEST_NA24143_mt-classification-best-results.csv
        expect: /hot/software/pipeline/pipeline-call-mtSNV/Nextflow/development/outputs/illumina/paired/call-mtSNV-4.0.0/NA24143/mitoCaller-1.0.0/output/MToolBox-1.2.1-b52269e_REFERENCE_NA24149_mt-classification-best-results.csv
        script: test/assert_MToolBox_csv.sh
      - actual: call-mtSNV-*/NA24143/mitoCaller-*/output/MToolBox-*-b52269e_NFTEST_NA24143_summary*.txt
        expect: /hot/software/pipeline/pipeline-call-mtSNV/Nextflow/development/outputs/illumina/paired/call-mtSNV-4.0.0/NA24143/mitoCaller-1.0.0/output/MToolBox-1.2.1-b52269e_REFERENCE_NA24149_summary-*.txt
        script: test/assert_MToolBox_summary.sh
